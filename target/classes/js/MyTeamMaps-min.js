AJS.$(document).ready(function(){var a=0;AJS.$("table.map-table th div").each(function(){if(AJS.$(this).outerWidth()>a){a=AJS.$(this).outerWidth()}});AJS.$("table.map-table th").height(a);AJS.$(document).on("mouseover","td.relationship-cell div:last-child",function(){var b=AJS.$(this);if(b.html()!=""){var c=b.parent("td").index();var d=b.parents("tr");d.children("td:first").children("div").addClass("hovered");AJS.$("tr.table-user-head").children("th:eq("+c+")").children("div").addClass("hovered")}});AJS.$(document).on("mouseout","td.relationship-cell div:last-child",function(){AJS.$(".hovered").removeClass("hovered")});AJS.$(".relations-colors-bar div").tooltip();AJS.$(".map-cell-dev").tooltip();heightAdjuster();AJS.$(window).resize(function(){heightAdjuster()});AJS.$(document).on("click","ul.filter-list li",function(){var b=AJS.$(this).attr("id");window.location.href="?filter="+b});AJS.$(document).on("change","select#realtion-select",function(){var b=AJS.$(this).val();var c=AJS.$("ul.filter-list li.selected").attr("id");if(typeof c==="undefined"){window.location.href="?jql-mode=true&relation="+b}else{window.location.href="?filter="+c+"&relation="+b}});AJS.$("form#jql-form").on("submit",function(b){if(AJS.$("button#custom-jql-button").is(":disabled")){b.preventDefault()}});AJS.$(document).on("click","button#custom-jql-button",function(){if(!AJS.$("input#custom-jql-input").is(":disabled")){AJS.$("form#jql-form").submit();return}AJS.$(this).children("span:last").html("Search");AJS.$("input#custom-jql-input").prop("disabled",false);AJS.$("ul.filter-list li.selected").removeClass("selected");verifyQuery()});AJS.$(document).on("keyup",function(){if(!AJS.$("input#custom-jql-input").is(":focus")){return}verifyQuery()});AJS.$(document).on("focus","input#custom-jql-input",function(){verifyQuery()})});function heightAdjuster(){var a=AJS.$(".adjustable-heights").offset().top;var b=AJS.$(window).height();AJS.$(".adjustable-heights").height(b-a-1)}function verifyQuery(){var b=AJS.$("button#custom-jql-button");var d=AJS.$("input#custom-jql-input").val();var c="aui-icon aui-icon-small aui-iconfont-approve";var a="aui-icon aui-icon-small aui-iconfont-error";AJS.$.post("",{query:d},function(e){if(e=="ok"){b.prop("disabled",false);b.removeClass("btn-error");b.addClass("btn-success");b.children("span:first-child").attr("class",c)}else{if(e=="error"){b.prop("disabled",true);b.removeClass("btn-success");b.addClass("btn-error");b.children("span:first-child").attr("class",a)}else{console.log(e)}}})};