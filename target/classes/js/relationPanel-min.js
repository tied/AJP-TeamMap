AJS.$(document).ready(function(){AJS.$(document).on("click","#report-a-relationship",function(){AJS.dialog2("#report-a-relationship-dialog").show()});AJS.$(document).on("click","#dialog-close-button",function(b){b.preventDefault();var a=$(this).parents("section#report-a-relationship-dialog");AJS.dialog2(a).hide()});AJS.$(document).on("click","span.DeleteLink",function(b){var d=AJS.$(this).parents("div.aRelation");var a=AJS.$(this).attr("action");var c=d.attr("id");AJS.$.ajax({url:a+"?id="+c,type:"DELETE",success:function(e){if(e=="success"){d.slideUp(100);d.fadeOut(110)}else{if(e=="error"){throwError("Error in removing!","<p>Something is Wrong...</p>","auto")}else{console.log(e)}}},error:function(e){throwError("Error in removing!","<p>Something is Wrong...</p>","auto")}})});AJS.$(document).on("click","#dialog-submit-button",function(i){i.preventDefault();var f=$(this).parents("section#report-a-relationship-dialog");var g=f.find("form");var c=g.find("input#project-key").val();var h=g.find("input#issue-id").val();var d=g.find("select#first-user-select").val();var b=g.find("select#second-user-select").val();var a=g.find("select#relation-select").val();AJS.$.post(g.attr("action"),{projectKey:c,IssueId:h,firstUser:d,secondUser:b,relationId:a},function(e){if(e.match("^<div")){g.trigger("reset");throwSuccess("Relationship Added","<p>New Relationship Has Been Recorded!</p>");AJS.$("#relationships-box").prepend(e)}else{if(e=="error"){throwError("Relationship Not Added!","<p>Something is Wrong...</p>","auto")}else{if(e=="licenseError"){throwError("License Error!","<p>Team Map plugin's License is either expired or invalid.</p>","manual")}else{console.log(e)}}}});AJS.dialog2(f).hide()})});function throwError(c,a,b){require(["aui/flag"],function(e){var d=e({type:"error",title:c,close:b,persistent:false,body:a})})}function throwSuccess(b,a){require(["aui/flag"],function(d){var c=d({type:"success",title:b,close:"auto",persistent:false,body:a})})};